<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="file_0000000042b861fd808de615ad3ddea5.png" type="image/png">
  <!-- Meta Tags for Social Sharing -->
  <meta property="og:title" content="KuGuider - Smart Resource Portal">
  <meta property="og:description" content="Access notes, papers, and academic resources instantly.">
  <meta property="og:image" content="https://kuguider.netlify.app/file_0000000042b861fd808de615ad3ddea5.png">
  <meta property="og:url" content="https://kuguider.netlify.app">
  <meta name="twitter:card" content="summary_large_image">
  
  <!-- Browser Address Bar Color (Mobile) -->
  <meta name="theme-color" content="#fff" />
  <meta name="msapplication-navbutton-color" content="#fff" />
  <meta name="apple-mobile-web-app-status-bar-style" content="#fff" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profile - KuGuider</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet"/>
  <style>
:root {
  --radius: 10px;
  --transition: 0.25s ease;

  /* Light Theme */
  --bg-light: #ffffff;
  --card-light: #f7f7f8;
  --text-light: #202123;
  --subtext-light: #6b6c6f;
  --border-light: #e5e5e7;
  --nav-bg-light: #f9f9f9;

  /* Dark Theme */
  --bg-dark: #131314;
  --card-dark: #1e1f20;
  --text-dark: #ececec;
  --subtext-dark: #9e9ea0;
  --border-dark: #2e2f32;
  --nav-bg-dark: #1a1a1a;
}

/* Theme handling */
html[data-theme="light"] {
  --bg: var(--bg-light);
  --card: var(--card-light);
  --text: var(--text-light);
  --subtext: var(--subtext-light);
  --border: var(--border-light);
  --nav-bg: var(--nav-bg-light);

  --btn-bg: #000;
  --btn-text: #fff;
}
html[data-theme="dark"] {
  --bg: var(--bg-dark);
  --card: var(--card-dark);
  --text: var(--text-dark);
  --subtext: var(--subtext-dark);
  --border: var(--border-dark);
  --nav-bg: var(--nav-bg-dark);

  --btn-bg: #fff;
  --btn-text: #000;
}

/* Global */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: 'Poppins', sans-serif;
}
body {
  background: var(--bg);
  color: var(--text);
  transition: background var(--transition), color var(--transition);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

/* Theme Toggle */
.theme-toggle {
  position: fixed;
  right: 1rem;
  top: 1rem;
  height: 40px;
  width: 40px;
  border: 1px solid var(--border);
  background: transparent;
  border-radius: 50%;
  cursor: pointer;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
}
.theme-toggle:hover {
  background: var(--btn-bg);
  color: var(--btn-text);
}

/* Header */
.header-logo{
  background: var(--nav-bg);
  width: 100%;
  padding: 1rem 3rem;
  text-align: center;
}
.header-logo .img{
  width: 200px;
  height: 100px;
  object-fit: cover;
  border-radius: var(--radius);
  margin-bottom: 1rem;
}

/* Navbar */
nav {
  background: var(--nav-bg);
  padding: 0.75rem;
  width: 100%;
  display: flex;
  justify-content: center;
}
.nav-links {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 0.6rem;
}
nav a {
  padding: 0.55rem 0.8rem;
  border-radius: var(--radius);
  font-size: 0.8rem;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 0.3rem;
  transition: var(--transition);

  background: var(--btn-bg);
  color: var(--btn-text);
  border: none;
}
nav a:hover {
  opacity: 0.8;
}

/* Loader */
.loader-overlay {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: var(--bg);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:3000;
  transition: var(--transition);
}
.loader-spinner {
  border: 5px solid var(--border);
  border-top: 5px solid var(--btn-bg);
  border-radius:50%;
  width: 45px;
  height:45px;
  animation: spin 1s linear infinite;
  margin-bottom:0.8rem;
}
.loader-text { font-size:1rem; color: var(--btn-bg); font-weight:600; }
@keyframes spin { 0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }

/* Profile Card */
.profile-card {
  background: var(--card);
  width: 90%;
  padding:1.5rem;
  border-radius: var(--radius);
  margin: 2rem auto;
  text-align:center;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap: 0.6rem;
}


.profile-card img {
  width:90px;
  height:90px;
  border-radius:50%;
  margin-bottom:0.5rem;
}
.profile-card h2 {
  margin:0.2rem 0;
  font-size:1.2rem;
}
.profile-card p {
  margin:0.2rem 0;
  color: var(--subtext);
  font-size:0.9rem;
}
.profile-card button {
  padding:0.5rem 1rem;
  border:none;
  border-radius: var(--radius);
  font-size:0.9rem;
  font-weight:600;
  cursor:pointer;
  transition: var(--transition);
}
#editProfileBtn { background: var(--btn-bg); color: var(--btn-text); }
#editProfileBtn:hover { opacity: 0.85; }
#logoutBtn {
  margin-top:0.5rem;
  background:orangered;
  color:#fff;
}
#logoutBtn:hover { opacity: 0.85; }

/* Edit Modal */
#editProfileModal {
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.4);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:100;
}
#editProfileModal .modalContent {
  background: var(--card);
  padding:1.2rem;
  border-radius: var(--radius);
  width:280px;
  text-align:center;
  color: var(--text);
}
#editProfileModal input[type="text"] {
  width:100%;
  padding:0.5rem;
  margin-bottom:0.8rem;
  border-radius: var(--radius);
  border:1px solid var(--border);
  background: var(--bg);
  color: var(--text);
}
#editProfileModal button {
  padding:0.4rem 0.8rem;
  border:none;
  border-radius: var(--radius);
  cursor:pointer;
  font-weight:600;
  font-size:0.85rem;
}
#saveProfileBtn { background: var(--btn-bg); color: var(--btn-text); }
#cancelProfileBtn { background:orangered; color:#fff; }

/* Footer */
footer {
  width:100%;
  background: var(--nav-bg);
  color: var(--text);
  text-align:center;
  padding:0.8rem;
  font-size:0.85rem;
  border-top:1px solid var(--border);
  margin-top:auto;
}
footer a { color: var(--btn-bg); text-decoration: underline; }

/* Responsive */
@media(max-width: 480px){
  .profile-card { width:90%; padding:1rem; }
  .header-logo img { width:140px; height:70px; }
}

  </style>
</head>
<body>

<div class="theme-toggle" onclick="toggleTheme()">
  <i class="fa-solid fa-sun"></i>
</div>

<div class="loader-overlay" id="loaderOverlay">
  <div class="loader-spinner"></div>

</div>

<div class="header-logo">
  <img class="img" src="file_0000000042b861fd808de615ad3ddea5.png" alt="KuGuider Logo">
</div>

<nav>
  <div class="nav-links">
    <a href="about.html"><i class="fa-solid fa-address-card"></i>About</a>
    <a href="notes.html"><i class="fa-solid fa-file-lines"></i>Notes</a>
    <a href="papers.html"><i class="fa-solid fa-file-pdf"></i>Papers</a>
    <a href="chat.html" style="background: orangered; color:#fff;"><i class="fa-solid fa-comments"></i>Chat</a>
    <a href="profile.html" class="active"><i class="fa-solid fa-user"></i>Profile</a>
  </div>
</nav>

<div class="profile-card">
  <img src="https://www.w3schools.com/howto/img_avatar.png" id="profileAvatar" alt="User Avatar">
  <h2 id="profileName">Username</h2>
  <p>ID: <span id="profileID">12345</span></p>
  <button id="editProfileBtn"><i class="fa-solid fa-pen"></i> Edit Profile</button>
  <button id="logoutBtn"><i class="fa-solid fa-right-from-bracket"></i> Logout</button>
</div>

<div id="editProfileModal">
  <div class="modalContent">
    <h3>Edit Name</h3>
    <input type="text" id="editName" placeholder="Enter new name">
    <div>
      <button id="saveProfileBtn">Save</button>
      <button id="cancelProfileBtn">Cancel</button>
    </div>
  </div>
</div>

<footer>
  Made with ❤️ by <a href="https://basifshafi.netlify.app/">Basif Shafi Wani.</a>
</footer>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.9.1/firebase-auth-compat.js"></script>
<script>
const firebaseConfig={
  apiKey:"AIzaSyBmbFYqpuqaWCxmh7VqKTb_8CUvyEohzbw",
  authDomain:"kuguider.firebaseapp.com",
  projectId:"kuguider"
};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();

// Elements
const profileName=document.getElementById("profileName");
const profileID=document.getElementById("profileID");
const editProfileBtn=document.getElementById("editProfileBtn");
const editProfileModal=document.getElementById("editProfileModal");
const editName=document.getElementById("editName");
const saveProfileBtn=document.getElementById("saveProfileBtn");
const cancelProfileBtn=document.getElementById("cancelProfileBtn");
const logoutBtn=document.getElementById("logoutBtn");
const loaderOverlay=document.getElementById("loaderOverlay");

// Loader
loaderOverlay.style.display = "flex";

// Auth state
auth.onAuthStateChanged(user => {
  if(!user) window.location.href="index.html";
  else {
    profileName.textContent = user.displayName || "Anonymous";
    profileID.textContent = user.uid.substring(0,8);
    loaderOverlay.style.display="none";
  }
});

// Edit profile
editProfileBtn.onclick = () => {
  editName.value = profileName.textContent;
  editProfileModal.style.display="flex";
};
cancelProfileBtn.onclick = () => { editProfileModal.style.display="none"; };
saveProfileBtn.onclick = () => {
  const user = auth.currentUser;
  const newName = editName.value.trim();
  if(!newName) return alert("Name cannot be empty");
  user.updateProfile({displayName:newName})
    .then(()=>{ profileName.textContent=newName; editProfileModal.style.display="none"; })
    .catch(err=>alert(err.message));
};

// Logout
logoutBtn.onclick = () => { auth.signOut().then(()=>window.location.href="index.html"); };

// Theme toggle
function toggleTheme(){
  const root = document.documentElement;
  const newTheme = root.getAttribute("data-theme")==="dark" ? "light":"dark";
  root.setAttribute("data-theme", newTheme);
  localStorage.setItem("theme", newTheme);
}
window.addEventListener("DOMContentLoaded",()=>{
  const savedTheme = localStorage.getItem("theme");
  if(savedTheme) document.documentElement.setAttribute("data-theme", savedTheme);
});
</script>

</body>
</html>